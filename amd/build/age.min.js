define("block_aipromptgen/age",["exports"],(function(_exports){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.initAgeModal=void 0;const $=function(sel){let root=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return root.querySelector(sel)};class SimpleModal{constructor(id){this.node=document.getElementById(id),this.backdrop=document.getElementById("ai4t-modal-backdrop")}open(prefill){if(this.node){if("function"==typeof prefill)try{prefill()}catch(e){}this.node.style.display="block",this.backdrop&&(this.backdrop.style.display="block"),this.node.focus()}}close(){this.node&&(this.node.style.display="none",this.backdrop&&(this.backdrop.style.display="none"))}}_exports.initAgeModal=()=>{const modal=new SimpleModal("ai4t-age-modal"),openBtn=$("#ai4t-age-browse"),closeBtn=$("#ai4t-age-modal-close"),cancelBtn=$("#ai4t-age-modal-cancel"),insertBtn=$("#ai4t-age-modal-insert"),input=$("#id_agerange"),exact=$("#ai4t-age-exact"),from=$("#ai4t-age-from"),to=$("#ai4t-age-to"),modeExact=$("#ai4t-age-mode-exact"),modeRange=$("#ai4t-age-mode-range"),syncEnabled=()=>{if(null==modeExact?void 0:modeExact.checked)return null==exact||exact.removeAttribute("disabled"),null==from||from.setAttribute("disabled","disabled"),void(null==to||to.setAttribute("disabled","disabled"));null==exact||exact.setAttribute("disabled","disabled"),null==from||from.removeAttribute("disabled"),null==to||to.removeAttribute("disabled")},prefill=()=>{if(!input)return;const v=(input.value||"").trim();if(!v)return modeExact&&(modeExact.checked=!0),exact.value="",from.value="",to.value="",void syncEnabled();if(/^\d+$/.test(v))return exact.value=v,from.value="",to.value="",modeExact&&(modeExact.checked=!0),void syncEnabled();const m=v.match(/^\s*(\d+)\s*[-\u2013]\s*(\d+)\s*$/u);if(m)return exact.value="",from.value=m[1],to.value=m[2],modeRange&&(modeRange.checked=!0),void syncEnabled();modeExact&&(modeExact.checked=!0),exact.value="",from.value="",to.value="",syncEnabled()};null==openBtn||openBtn.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation(),modal.open(prefill)})),null==closeBtn||closeBtn.addEventListener("click",(()=>modal.close())),null==cancelBtn||cancelBtn.addEventListener("click",(()=>modal.close())),null==insertBtn||insertBtn.addEventListener("click",(()=>{if(!input)return void modal.close();const ev=(exact.value||"").trim(),fv=(from.value||"").trim(),tv=(to.value||"").trim(),useExact=null==modeExact?void 0:modeExact.checked;if(useExact&&ev)return input.value=ev,void modal.close();if(!useExact&&fv&&tv){let a=parseInt(fv,10),b=parseInt(tv,10);if(!Number.isNaN(a)&&!Number.isNaN(b))return a>b&&([a,b]=[b,a]),input.value="".concat(a,"-").concat(b),void modal.close()}modal.close()})),null==modeExact||modeExact.addEventListener("change",syncEnabled),null==modeRange||modeRange.addEventListener("change",syncEnabled),document.addEventListener("keydown",(ev=>{"Escape"===ev.key&&modal.close()}))}}));

//# sourceMappingURL=age.min.js.map