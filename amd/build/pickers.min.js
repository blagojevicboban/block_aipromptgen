define("block_aipromptgen/pickers",["exports"],(function(_exports){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.initLanguageModal=_exports.attachPicker=_exports.attachOutcomesModal=void 0;
/**
   * Generic picker + outcomes + language modal logic.
   * @module     block_aipromptgen/pickers
   * @author     Boban Blagojevic
   * @copyright  2025 AI4Teachers
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */
const $=function(sel){let root=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return root.querySelector(sel)},$$=function(sel){let root=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return Array.from(root.querySelectorAll(sel))};_exports.attachPicker=config=>{const{openId:openId,modalId:modalId,closeId:closeId,cancelId:cancelId,itemSelector:itemSelector,targetId:targetId,backdropId:backdropId="ai4t-modal-backdrop"}=config,openBtn=document.getElementById(openId),modal=document.getElementById(modalId),backdrop=document.getElementById(backdropId),closeBtn=document.getElementById(closeId),cancelBtn=document.getElementById(cancelId),target=document.getElementById(targetId),close=()=>{modal&&backdrop&&(modal.style.display="none",backdrop.style.display="none")},pick=el=>{const v=el.getAttribute("data-value");target&&null!==v&&(target.value=v),close()};null==openBtn||openBtn.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation(),modal&&backdrop&&(modal.style.display="block",backdrop.style.display="block",modal.focus())})),null==closeBtn||closeBtn.addEventListener("click",close),null==cancelBtn||cancelBtn.addEventListener("click",close),null==backdrop||backdrop.addEventListener("click",close),document.addEventListener("keydown",(ev=>{"Escape"===ev.key&&close()})),$$(itemSelector).forEach((li=>{li.addEventListener("click",(()=>pick(li))),li.addEventListener("keydown",(ev=>{"Enter"!==ev.key&&" "!==ev.key||(ev.preventDefault(),pick(li))}))}))};_exports.attachOutcomesModal=()=>{const openBtn=$("#ai4t-outcomes-browse"),modal=$("#ai4t-outcomes-modal"),backdrop=$("#ai4t-modal-backdrop"),closeBtn=$("#ai4t-outcomes-modal-close"),cancelBtn=$("#ai4t-outcomes-modal-cancel"),insertBtn=$("#ai4t-outcomes-modal-insert"),ta=$("#id_outcomes"),close=()=>{modal&&backdrop&&(modal.style.display="none",backdrop.style.display="none")};null==openBtn||openBtn.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation(),modal&&backdrop&&(modal.style.display="block",backdrop.style.display="block",modal.focus())})),null==closeBtn||closeBtn.addEventListener("click",close),null==cancelBtn||cancelBtn.addEventListener("click",close),null==insertBtn||insertBtn.addEventListener("click",(()=>{if(!ta)return void close();const vals=$$(".ai4t-outcome-checkbox:checked").map((cb=>cb.value)).filter(Boolean);if(!vals.length)return void close();let cur=ta.value||"";cur&&!/\n$/.test(cur)&&(cur+="\n"),ta.value=cur+vals.join("\n"),close()})),null==backdrop||backdrop.addEventListener("click",close),document.addEventListener("keydown",(ev=>{"Escape"===ev.key&&close()}))};_exports.initLanguageModal=()=>{const openBtn=$("#ai4t-language-browse"),modal=$("#ai4t-language-modal"),backdrop=$("#ai4t-modal-backdrop"),closeBtn=$("#ai4t-language-modal-close"),cancelBtn=$("#ai4t-language-modal-cancel"),input=$("#id_language"),codeEl=$("#id_languagecode"),close=()=>{modal&&backdrop&&(modal.style.display="none",backdrop.style.display="none")},sync=()=>{if(!input||!codeEl)return;const t=(input.value||"").trim();if(!t)return;const m=t.match(/\(([a-z]{2,3}(?:[_-][a-z]{2,3})?)\)/i);m?codeEl.value=m[1].replace("-","_").toLowerCase():$$(".ai4t-language-item").some((li=>(li.getAttribute("data-name")||"").toLowerCase()===t.toLowerCase()&&(codeEl.value=li.getAttribute("data-code"),!0)))};null==openBtn||openBtn.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation(),modal&&backdrop&&(modal.style.display="block",backdrop.style.display="block",modal.focus())})),null==closeBtn||closeBtn.addEventListener("click",close),null==cancelBtn||cancelBtn.addEventListener("click",close),null==backdrop||backdrop.addEventListener("click",close),document.addEventListener("keydown",(ev=>{"Escape"===ev.key&&close()})),$$(".ai4t-language-item").forEach((li=>{li.addEventListener("click",(()=>{input&&(input.value=li.getAttribute("data-name")||""),codeEl&&(codeEl.value=li.getAttribute("data-code")||""),close()})),li.addEventListener("keydown",(ev=>{"Enter"!==ev.key&&" "!==ev.key||(ev.preventDefault(),li.click())}))})),null==input||input.addEventListener("blur",sync),null==input||input.addEventListener("change",sync)}}));

//# sourceMappingURL=pickers.min.js.map